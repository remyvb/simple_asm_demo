---
deployment_zone: vagrant

role: role::oradb::asm_only

profile::oradb::asm_software::version:                     12.2.0.1
profile::oradb::asm_software::file_name:                   linuxx64_12201_grid_home

profile::oradb::grid_base:                                 /u01/app/grid/admin
profile::oradb::grid_home:                                 /u01/app/grid/product/12.2.0.1/grid_home1

profile::oradb::db_software::version:                      12.2.0.1
profile::oradb::db_software::file_name:                    linuxx64_12201_database
profile::oradb::db_software::type:                         EE

profile::oradb::ora_home:                                  /u01/app/oracle/product/12.2.0.1/db_home1

profile::oradb::database::db01::dbname:                    DB122
profile::oradb::database::db01::log_size:                  100M
profile::oradb::database::db01::user_tablespace_size:      5M
profile::oradb::database::db01::system_tablespace_size:    50M
profile::oradb::database::db01::temporary_tablespace_size: 50M
profile::oradb::database::db01::undo_tablespace_size:      50M
profile::oradb::database::db01::sysaux_tablespace_size:    50M
profile::oradb::database::db01::container_database:        enabled

profile::oradb::setup_dg::dgconfig:
  primary:
    db_unique_name: "%{hiera('profile::oradb::database::db01::dbname')}"
    db_hostname: 'asm122.example.com'
    db_port: 1521
    service_name: "%{hiera('profile::oradb::database::db01::dbname')}.domain.local"
    instance_name: "%{hiera('profile::oradb::database::db01::dbname')}"
    sys_password: "%{hiera('profile::oradb::ora_sys_password')}"
  standby:
    db_unique_name: "%{hiera('profile::oradb::database::db01::dbname')}DG"
    db_hostname: "%{::fqdn}"
    db_port: 1521
    service_name: "%{hiera('profile::oradb::database::db01::dbname')}DG.domain.local"
    instance_name: "%{hiera('profile::oradb::database::db01::dbname')}"
    remote_listener: 'nsbamscan-a3dbam:1521'

profile::oradb::setup_user_equivalence::nodes:
  - asm122.example.com
  - asm123.example.com

profile::oradb::user_equivalence::ssh_module:        '::ssh'

ssh::sshd_config_hostkey:
  - /etc/ssh/ssh_host_rsa_key
  - /etc/ssh/ssh_host_ecdsa_key
  - /etc/ssh/ssh_host_ed25519_key

ssh::users:
  grid:
    allow: [ 'oracle' ]
  oracle:
    allow: [ 'oracle' ]

ssh::keys::oracle:
  type: 'ssh-rsa'
  public_key: 'AAAAB3NzaC1yc2EAAAABIwAAAQEAq1hhJJQu4NC9LxEz/lWczzC2cQUJZNt+Cgj5RAteGG2Me1sN2hQI7mMWu/vVWYXpG5pgOVyv3IPkApfC5tXqHcygvWhKbyvo3mWn2I9wvSL4f2gsv/RKgdP50lfgNxOemrIfrz08A16AloHcYS/titxZkJGNqkzg6XrM3EslzRvMWXFut1ACYzj8YQwLtzzmJJUrn0/YnEctA/6Jrl5U+kUlt/kpO6WxHoPxGruAnFGnNTM2WobUSpculzuT3qwAfQXayK6v4/SwPzmye4/4F08dgEO1z6aAp1kLSkQnib+O3WkmluDyKtRmhrpZDjZf1bsZ5OKidSmiEDUa+N9dKQ=='

ssh::keys:
  oracle:
    ensure: present
    user: oracle
    type: rsa
    key: 'AAAAB3NzaC1yc2EAAAABIwAAAQEAq1hhJJQu4NC9LxEz/lWczzC2cQUJZNt+Cgj5RAteGG2Me1sN2hQI7mMWu/vVWYXpG5pgOVyv3IPkApfC5tXqHcygvWhKbyvo3mWn2I9wvSL4f2gsv/RKgdP50lfgNxOemrIfrz08A16AloHcYS/titxZkJGNqkzg6XrM3EslzRvMWXFut1ACYzj8YQwLtzzmJJUrn0/YnEctA/6Jrl5U+kUlt/kpO6WxHoPxGruAnFGnNTM2WobUSpculzuT3qwAfQXayK6v4/SwPzmye4/4F08dgEO1z6aAp1kLSkQnib+O3WkmluDyKtRmhrpZDjZf1bsZ5OKidSmiEDUa+N9dKQ=='

profile::oradb::setup_user_equivalence::private_key: |
  -----BEGIN RSA PRIVATE KEY-----
  MIIEoQIBAAKCAQEAq1hhJJQu4NC9LxEz/lWczzC2cQUJZNt+Cgj5RAteGG2Me1sN
  2hQI7mMWu/vVWYXpG5pgOVyv3IPkApfC5tXqHcygvWhKbyvo3mWn2I9wvSL4f2gs
  v/RKgdP50lfgNxOemrIfrz08A16AloHcYS/titxZkJGNqkzg6XrM3EslzRvMWXFu
  t1ACYzj8YQwLtzzmJJUrn0/YnEctA/6Jrl5U+kUlt/kpO6WxHoPxGruAnFGnNTM2
  WobUSpculzuT3qwAfQXayK6v4/SwPzmye4/4F08dgEO1z6aAp1kLSkQnib+O3Wkm
  luDyKtRmhrpZDjZf1bsZ5OKidSmiEDUa+N9dKQIBIwKCAQEApnMcie8I96Y0HxgG
  n0vaKFs04tGxWqlV3dzU4wO6fiFGo7eJzIh9tGBB+HD7I8Ppwwr+Y5veCWot8+Ph
  5435XsbICHPwiUCZEo6jDOMdD4EOp6cG5lsGjL9KdI/hH49m32s0uNxmLyiaK86b
  kZxF11m2F2jSwrEVABDkQ7a3AcGkZFDzchvOKwKwnjaibOHx+cMNDnjE4t3hElAc
  8a7jVuZn+Uh/9z0LrS1aLrG7dXPVb3lw8AGNxajddARcyYt+UkAjl1SVqW9N+HQo
  AlATzjF8Rw0EJ7PP7NoRwYAUbB/Sux/40oZtTSPBvB0hADk0MLbV+XoJXanlQPWH
  swDCQwKBgQDYvWV4ZCj4MLZZvnJpmGDnOCdgpcQy93xKxYsqQdZU0Fq0nnDezoX9
  d6mdVPAqtfl8mD46srhfA3wIaKtKsnrNXZ5PpmeY6WMPkOXX4EQQyRNweiqQ0soq
  rlYW+P35x7vKdiwJ/PBE46mmTlJMV9PZA08ru3FvgCT7aGpS+5Mo/wKBgQDKYfTd
  mexMjcOhh0NGNk3CEPfUH1qeu0DU59Wb+0To9htga72olEK+OFjRSm66kxWhuUND
  oa69sFa6r5ramPRtUkOiuzPINY/9l/pmIHHxCQi8Jl6RptBpWARago2gQ6bF08lg
  ObGXHWfTI++2CPp2vmRsPzdWfgLvXWSeLnER1wKBgDe7rGDJTF0T1x5kLAyGRM29
  +39AkYly1tFl/zbAePE85B/Q+HPOtL2FK518PcHXBaOyHqFhKBhunDytM1xZx85o
  h8tWrOzOTKw7M8nL9D7UnplD/FEgQp1Cxa4ixPcWGliiC1MGhu0kmVambO8PRRqL
  0oeWmYMSUqcMOJj+3LLFAoGAFyEjTIaeqanNNwgk8hTVr8dsx8kRq72hAmOjYkia
  KUCyq+8OXGi3K66rEJrK036GIRx8t0WtkgWGQTij+7m1iNYznZG8xmyFfBFechJW
  KizrDjBFUnl253fF+7cmIPHJ6rkeVCPZyCCeJsJHSAEGrnwou+n3sh0HplPQ/CKQ
  lFMCgYBDeJ5G8jK91j0QuGI2Zssb2BSVskmQB7PxXLS+yTX0iSv5+1r6g36aOuhV
  3Blzac4mb7bxp5591RZtKmG3GQBFIWY4SgnDhN87XrE+ijk70w9uReWLs7dQyFR8
  sn+CjHQaNH8HU3zQg4KAUs/ENmYemjFipjE+sTJ7SltWbp+oRA==
  -----END RSA PRIVATE KEY-----
